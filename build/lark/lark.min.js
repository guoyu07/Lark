var __define=this.__define||function(t,i,e,n){Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:e,set:n})},lark;!function(t){function i(t,i,e){var n=t.prototype;n.__class__=i;var s=[i];e&&(s=s.concat(e));var r=n.__types__;if(n.__types__)for(var a=r.length,h=0;a>h;h++){var o=r[h];-1==s.indexOf(o)&&s.push(o)}n.__types__=s}t.registerClass=i}(lark||(lark={}));var lark;!function(t){t.XML}(lark||(lark={}));var lark;!function(t){t.Orientation=null}(lark||(lark={}));var lark;!function(t){t.Motion}(lark||(lark={}));var lark;!function(t){t.Geolocation}(lark||(lark={}));var lark;!function(t){var i;!function(t){function i(t){var i=t.stage?t.stage.$hashCode:0;return n[i]}function e(t){n[t.$stage.$hashCode]=t}var n={};t.$getTextAdapter=i,t.$cacheTextAdapter=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i;!function(t){t.sharedRenderContext,t.surfaceFactory}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(){function t(){}var i=t;return p=i.prototype,t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t}();i.ScaleMode=e,t.registerClass(e,"lark.sys.ScaleMode")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.LEFT="left",t.RIGHT="right",t.CENTER="center",t}();t.HorizontalAlign=i,t.registerClass(i,"lark.HorizontalAlign")}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(){function t(){}var i=t;return p=i.prototype,t.NOT_SET="notSet",t.PORTRAIT="portrait",t.LANDSCAPE="landscape",t.LANDSCAPE_FLIPPED="landscapeFlipped",t}();i.OrientationMode=e,t.registerClass(e,"lark.sys.OrientationMode")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i={},e=function(){function e(){}var n=e;return p=n.prototype,e.measureText=function(e,n){var s=t.sys.sharedRenderContext,r=0,a=i,h=a[n]||(a[n]={});s.font=n;for(var o=e.length,l=0;o>l;l++){var c=e.charCodeAt(l),u=h[c]||(h[c]=s.measureText(e.charAt(l)).width);r+=u}return r},e}();t.TextMeasurer=e,t.registerClass(e,"lark.TextMeasurer")}(lark||(lark={}));var lark;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(lark||(lark={}));var lark;!function(t){var i;!function(i){function e(i){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var s=t.$locale_strings[t.$language][i];if(!s)return"{"+i+"}";for(var r=e.length,a=0;r>a;a++)s=s.replace("{"+a+"}",e[a]);return s}i.tr=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t}();t.VerticalAlign=i,t.registerClass(i,"lark.VerticalAlign")}(lark||(lark={}));var lark;!function(t){t.Sound}(lark||(lark={}));var lark;!function(t){function i(t){if(!t)return null;var i=e[t];if(i)return i;var n=t.split("."),s=n.length;i=__global;for(var r=0;s>r;r++){var a=n[r];if(i=i[a],!i)return null}return e[t]=i,i}var e={};t.getDefinitionByName=i}(lark||(lark={}));var __global=__global||this,lark;!function(t){function i(t,i){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t),n=e?e.__types__:null;return n?-1!==n.indexOf(i):!1}t.is=i}(lark||(lark={}));var lark;!function(t){t.Video}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.GET="GET",t.POST="POST",t}();t.HttpMethod=i,t.registerClass(i,"lark.HttpMethod")}(lark||(lark={}));var lark;!function(t){t.HttpRequest}(lark||(lark={}));var lark;!function(t){function i(i,e){t.sys.$ticker.$startTick(i,e)}t.startTick=i}(lark||(lark={}));var lark;!function(t){function i(i,e){t.sys.$ticker.$stopTick(i,e)}t.stopTick=i}(lark||(lark={}));var lark;!function(t){t.ImageLoader}(lark||(lark={}));var lark;!function(t){function i(){return Date.now()-t.$START_TIME}t.$START_TIME=0,t.getTimer=i}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=i,t.registerClass(i,"lark.HttpResponseType")}(lark||(lark={}));var lark;!function(){}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=[],n=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}var i=t;return p=i.prototype,t.release=function(t){e.push(t)},t.create=function(){var i=e.pop();return i||(i=new t),i},p.setTo=function(t,i,e,n){return this.minX=t,this.minY=i,this.maxX=e,this.maxY=n,this.updateArea(),this},p.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},p.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},p.intersect=function(t){return this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?void this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?void this.setEmpty():void this.updateArea())},p.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},p.isEmpty=function(){return this.width<=0||this.height<=0},p.intersects=function(t){var i=this.minX>t.minX?this.minX:t.minX,e=this.maxX<t.maxX?this.maxX:t.maxX;return i>e?!1:(i=this.minY>t.minY?this.minY:t.minY,e=this.maxY<t.maxY?this.maxY:t.maxY,e>=i)},p.updateRegion=function(t,i,e){var n,s,r,a,h=i,o=h.a,l=h.b,c=h.c,u=h.d,d=h.tx,p=h.ty,f=t.x,$=t.y,v=f+t.width,g=$+t.height;if(1===o&&0===l&&0===c&&1===u)n=Math.floor(f+d)-1,s=Math.floor($+p)-1,r=Math.ceil(v+d)+1,a=Math.ceil(g+p)+1;else{var m=o*f+c*$+d,y=l*f+u*$+p,x=o*v+c*$+d,T=l*v+u*$+p,k=o*v+c*g+d,C=l*v+u*g+p,R=o*f+c*g+d,b=l*f+u*g+p,E=0;m>x&&(E=m,m=x,x=E),k>R&&(E=k,k=R,R=E),n=Math.floor(k>m?m:k)-1,r=Math.ceil(x>R?x:R)+1,y>T&&(E=y,y=T,T=E),C>b&&(E=C,C=b,b=E),s=Math.floor(C>y?y:C)-1,a=Math.ceil(T>b?T:b)+1}if(e){var _=e.x,M=_+e.width,F=e.y,L=F+e.height;_>n&&(n=_),F>s&&(s=F),r>M&&(r=M),a>L&&(a=L),(n>=r||s>=a)&&(n=s=r=a=0)}this.minX=n,this.minY=s,this.maxX=r,this.maxY=a,this.width=r-n,this.height=a-s,this.area=this.width*this.height},t}();i.Region=n,t.registerClass(n,"lark.sys.Region")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=i,t.registerClass(i,"lark.BlendMode")}(lark||(lark={}));var lark;!function(t){var i;!function(t){function i(t){var i=s[t];return void 0===i?0:i}function e(t){var i=n[t];return void 0===i?"normal":i}for(var n=["normal","add","erase"],s={},r=n.length,a=0;r>a;a++){var h=n[a];s[h]=a}t.blendModeToNumber=i,t.numberToBlendMode=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=__define,e=t;return p=e.prototype,i(t,"language",function(){return t.$language},void 0),i(t,"isMobile",function(){return t.$isMobile},void 0),i(t,"os",function(){return t.$os},void 0),i(t,"hasGeolocation",function(){return t.$hasGeolocation},void 0),i(t,"hasOrientation",function(){return t.$hasOrientation},void 0),i(t,"hasMotion",function(){return t.$hasMotion},void 0),t.$language="zh-CN",t.$os="Unknown",t}();t.Capabilities=i,t.registerClass(i,"lark.Capabilities")}(lark||(lark={}));var lark;!function(t){var i;!function(i){i.$ticker,i.$invalidateRenderFlag=!1,i.$requestRenderingFlag=!1;var e=function(){function e(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.frameInterval=2e3,this.lastCount=2e3,t.$START_TIME=Date.now()}var n=e;return p=n.prototype,p.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},p.$removePlayer=function(t){var i=this.playerList.indexOf(t);if(-1!==i){this.playerList=this.playerList.concat(),this.playerList.splice(i,1)}},p.$startTick=function(t,i){var e=this.getTickIndex(t,i);-1==e&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(i))},p.$stopTick=function(t,i){var e=this.getTickIndex(t,i);-1!=e&&(this.concatTick(),this.callBackList.splice(e,1),this.thisObjectList.splice(e,1))},p.getTickIndex=function(t,i){for(var e=this.callBackList,n=this.thisObjectList,s=e.length-1;s>=0;s--)if(e[s]===t&&n[s]==i)return s;return-1},p.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},p.$setFrameRate=function(t){t=+t||0,0>=t||this.$frameRate!==t&&(this.$frameRate=t,t>60&&(t=60),this.lastCount=this.frameInterval=Math.round(6e4/t))},p.update=function(){for(var e=this.callBackList,n=this.thisObjectList,s=e.length,r=i.$requestRenderingFlag,a=t.getTimer(),h=0;s>h;h++)e[h].call(n[h],a)&&(r=!0);return this.lastCount-=1e3,this.lastCount>0?void(r&&this.render(!1)):(this.lastCount+=this.frameInterval,this.broadcastEnterFrame(),void this.render(!0))},p.render=function(t){var e=this.playerList,n=e.length;if(0!=n){i.$invalidateRenderFlag&&(this.broadcastRender(),i.$invalidateRenderFlag=!1);for(var s=0;n>s;s++)e[s].$render(t);i.$requestRenderingFlag=!1}},p.broadcastEnterFrame=function(){var i=t.DisplayObject.$enterFrameCallBackList,e=i.length;if(0!==e){i=i.concat();for(var n=0;e>n;n++)i[n].emitWith(t.Event.ENTER_FRAME)}},p.broadcastRender=function(){var i=t.DisplayObject.$renderCallBackList,e=i.length;if(0!==e){i=i.concat();for(var n=0;e>n;n++)i[n].emitWith(t.Event.RENDER)}},e}();i.Ticker=e,t.registerClass(e,"lark.sys.Ticker")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark_stages,lark;!function(t){var i;!function(i){function e(t,i){var e=t.minX<i.minX?t.minX:i.minX,n=t.minY<i.minY?t.minY:i.minY,s=t.maxX>i.maxX?t.maxX:i.maxX,r=t.maxY>i.maxY?t.maxY:i.maxY;return(s-e)*(r-n)}var n=function(){function t(){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1}var n=t;return p=n.prototype,p.setClipRect=function(t,i){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(i),this.clipArea=this.clipWidth*this.clipHeight},p.addRegion=function(t){if(this.clipRectChanged)return!0;var e=t.minX,n=t.minY,s=t.maxX,r=t.maxY;if(this.hasClipRect&&(0>e&&(e=0),0>n&&(n=0),s>this.clipWidth&&(s=this.clipWidth),r>this.clipHeight&&(r=this.clipHeight)),e>=s||n>=r)return!1;var a=this.dirtyList,h=i.Region.create();return a.push(h.setTo(e,n,s,r)),this.mergeDirtyList(a),!0},p.clear=function(){for(var t=this.dirtyList,e=t.length,n=0;e>n;n++)i.Region.release(t[n]);t.length=0},p.getDirtyRegions=function(){var t=this.dirtyList;if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var e=i.Region.create();t.push(e.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(t););return this.dirtyList},p.mergeDirtyList=function(t){var n=t.length;if(2>n)return!1;for(var s=this.hasClipRect,r=n>3?Number.POSITIVE_INFINITY:0,a=0,h=0,o=0,l=0;n-1>l;l++){var c=t[l];s&&(o+=c.area);for(var u=l+1;n>u;u++){var d=t[u],p=e(c,d)-c.area-d.area;r>p&&(a=l,h=u,r=p)}}if(s&&o/this.clipArea>.95&&(this.clipRectChanged=!0),a!=h){var f=t[h];return t[a].union(f),i.Region.release(f),t.splice(h,1),!0}return!1},t}();i.DirtyRegion=n,t.registerClass(n,"lark.sys.DirtyRegion")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){t.$hashCount=1;var i=function(){function i(){this.$hashCode=t.$hashCount++}var e=__define,n=i;return p=n.prototype,e(p,"hashCode",function(){return this.$hashCode},void 0),i}();t.LarkObject=i,t.registerClass(i,"lark.LarkObject")}(lark||(lark={}));var __extends=this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);e.prototype=i.prototype,t.prototype=new e},lark;!function(t){var i;!function(i){i.screenAdapter;var e=function(t){function e(){t.call(this)}__extends(e,t);var n=e;return p=n.prototype,p.calculateStageSize=function(t,e,n,s,r){var a=e,h=n,o=s,l=r,c=e/o||0,u=n/l||0;switch(t){case i.ScaleMode.EXACT_FIT:break;case i.ScaleMode.FIXED_HEIGHT:o=Math.round(e/u);break;case i.ScaleMode.FIXED_WIDTH:l=Math.round(n/c);break;case i.ScaleMode.NO_BORDER:c>u?h=Math.round(l*c):a=Math.round(o*u);break;case i.ScaleMode.SHOW_ALL:c>u?a=Math.round(o*u):h=Math.round(l*c);break;default:o=e,l=n}return{stageWidth:o,stageHeight:l,displayWidth:a,displayHeight:h}},e}(t.LarkObject);i.ScreenAdapter=e,t.registerClass(e,"lark.sys.ScreenAdapter",["lark.sys.IScreenAdapter"])}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=[],e=function(t){function e(i,e){void 0===i&&(i=0),void 0===e&&(e=0),t.call(this),this.x=i,this.y=e}__extends(e,t);var n=__define,s=e;return p=s.prototype,e.release=function(t){t&&i.push(t)},e.create=function(t,n){var s=i.pop();return s||(s=new e),s.setTo(t,n)},n(p,"length",function(){return Math.sqrt(this.x*this.x+this.y*this.y)},void 0),p.setTo=function(t,i){return this.x=t,this.y=i,this},p.clone=function(){return new e(this.x,this.y)},p.equals=function(t){return this.x==t.x&&this.y==t.y},e.distance=function(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))},e}(t.LarkObject);t.Point=e,t.registerClass(e,"lark.Point"),t.$TempPoint=new e}(lark||(lark={}));var lark;!function(t){function i(t){return t%=2*r,0>t&&(t+=2*r),t}function e(t,i,e,n){return Math.sqrt((e-t)*(e-t)+(n-i)*(n-i))}function n(t,i,n,s,r){var a=e(t,i,n,s);r.x=(n-t)/a,r.y=(s-i)/a}function s(t){var i=t.graphicsMap={};return i[6]=t.arc,i[18]=t.arcTo,i[17]=t.beginPath,i[14]=t.bezierCurveTo,i[10]=t.closePath,i[9]=t.fill,i[13]=t.fillRect,i[8]=t.lineTo,i[12]=t.moveTo,i[7]=t.quadraticCurveTo,i[11]=t.rect,i[15]=t.stroke,i[16]=t.strokeRect,i[3]=function(i){t.lineWidth=i},i[0]=function(i){t.miterLimit=i},i[5]=function(i){t.fillStyle=i},i[1]=function(i){t.lineCap=i},i[2]=function(i){t.lineJoin=i},i[4]=function(i){t.strokeStyle=i},i}var r=Math.PI,a=r/2,h=r+a,o=2*r,l={x:0,y:0},c={x:0,y:0},u={x:0,y:0},d=function(d){function f(){d.call(this),this.$commands=[],this.reset()}__extends(f,d);var $=__define,v=f;return p=v.prototype,f.createRadialGradient=function(i,e,n,s,r,a){return t.sys.sharedRenderContext.createRadialGradient(i,e,n,s,r,a)},f.createLinearGradient=function(i,e,n,s){return t.sys.sharedRenderContext.createLinearGradient(i,e,n,s)},f.createPattern=function(i,e){return t.sys.sharedRenderContext.createPattern(i,e)},$(p,"fillStyle",function(){return this._fillStyle},function(t){this._fillStyle=t,this.pushCommand(5,arguments)}),$(p,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this.pushCommand(3,arguments)}),$(p,"lineCap",function(){return this._lineCap},function(t){this._lineCap=t,this.pushCommand(1,arguments)}),$(p,"strokeStyle",function(){return this._strokeStyle},function(t){this._strokeStyle=t,this.pushCommand(4,arguments)}),$(p,"lineJoin",function(){return this._lineJoin},function(t){this._lineJoin=t,this.pushCommand(2,arguments)}),$(p,"miterLimit",function(){return this._miterLimit},function(t){this._miterLimit=t,this.pushCommand(0,arguments)}),p.arc=function(t,i,e,n,s,r){if(this.pushCommand(6,arguments),!(0>e)){if(r){var a=s;s=n,n=a}this.arcBounds(t,i,e,n,s)}},p.arcBounds=function(t,e,n,s,l){if(s=i(s),l=i(l),Math.abs(s-l)<.01)return this.extendByPoint(t-n,e-n),void this.extendByPoint(t+n,e+n);var c=0;s>l&&(c=o,l+=c);var u=Math.cos(s)*n,d=Math.cos(l)*n,p=Math.min(u,d),f=Math.max(u,d);r+c>=s&&l>=r+c&&(p=-n),c>=s&&l>=c&&(f=n);var $=Math.sin(s)*n,v=Math.sin(l)*n,g=Math.min($,v),m=Math.max($,v);h+c>=s&&l>=h+c&&(g=-n),a+c>=s&&l>=a+c&&(m=n),this.extendByPoint(p+t,g+e),this.extendByPoint(f+t,m+e)},p.quadraticCurveTo=function(t,i,e,n){this.pushCommand(7,arguments),this.checkMoveTo(),this.extendByPoint(t,i),this.extendByPoint(e,n)},p.bezierCurveTo=function(t,i,e,n,s,r){this.pushCommand(14,arguments),this.checkMoveTo(),this.extendByPoint(t,i),this.extendByPoint(e,n),this.extendByPoint(s,r)},p.lineTo=function(t,i){this.pushCommand(8,arguments),this.checkMoveTo(),this.extendByPoint(t,i)},p.fill=function(){this.pushCommand(9,arguments),this.hasFill=!0},p.closePath=function(){this.pushCommand(10,arguments)},p.rect=function(t,i,e,n){this.pushCommand(11,arguments),this.extendByPoint(t,i),this.extendByPoint(t+e,i+n)},p.moveTo=function(t,i){this.pushCommand(12,arguments),this.moveToX=t,this.moveToY=i,this.hasMoved=!0},p.fillRect=function(t,i,e,n){this.pushCommand(13,arguments),this.extendByPoint(t,i),this.extendByPoint(t+e,i+n),this.hasFill=!0},p.stroke=function(){this.pushCommand(15,arguments),this.hasStroke=!0},p.strokeRect=function(t,i,e,n){this.pushCommand(16,arguments),this.hasStroke=!0,this.extendByPoint(t,i),this.extendByPoint(t+e,i+n)},p.beginPath=function(){this.pushCommand(17,arguments),this.hasMoved=!1,this.moveToX=134217728,this.moveToY=134217728},p.arcTo=function(t,s,a,h,o){if(this.pushCommand(18,arguments),134217728!==this.moveToX){this.checkMoveTo(),n(this.moveToX,this.moveToY,t,s,c),n(a,h,t,s,u),l.x=c.x+u.x,l.y=c.y+u.y,n(l.x,l.y,0,0,l);var d=c.x*l.x+c.y*l.y,p=e(c.x,c.y,0,0),f=e(l.x,l.y,0,0),$=d/(p*f),v=Math.acos($),g=o/Math.sin(v),m=t+l.x*g,y=s+l.y*g,x=o/Math.tan(v),T=t+c.x*x,k=s+c.y*x,C=t+u.x*x,R=s+u.y*x;n(m,y,T,k,l);var b=Math.atan2(l.y,l.x);n(m,y,C,R,l);var E=Math.atan2(l.y,l.x),_=E-b;if(_=i(_),_>r){var M=E;E=b,b=M}this.arcBounds(m,y,o,b,E)}},p.clear=function(){this.reset(),this.$commands.length=0,this.$targetDisplay.$invalidateContentBounds()},p.reset=function(){this._fillStyle="#000000",this._lineCap="butt",this._lineJoin="miter",this._lineWidth=1,this._miterLimit=10,this._strokeStyle="#000000",this.hasMoved=!1,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.isFirst=!0,this.moveToX=134217728,this.moveToY=134217728,this.hasStroke=!1,this.hasFill=!1},p.pushCommand=function(t,i){this.$commands.push({type:t,arguments:i}),this.$targetDisplay.$invalidateContentBounds()},p.checkMoveTo=function(){this.hasMoved&&(this.hasMoved=!1,this.extendByPoint(this.moveToX,this.moveToY))},p.extendByPoint=function(t,i){this.isFirst?(this.isFirst=!1,this.maxX=this.minX=t,this.maxY=this.minY=i):(this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i))},p.$measureContentBounds=function(t){if(!this.hasFill&&!this.hasStroke)return void t.setEmpty();if(this.hasStroke)var i=this._lineWidth,e=.5*i;else e=i=0;t.setTo(this.minX-e,this.minY-e,this.maxX-this.minX+i,this.maxY-this.minY+i)},p.$render=function(t){t.save(),t.fillStyle="#000000",t.lineCap="butt",t.lineJoin="miter",t.lineWidth=1,t.miterLimit=10,t.strokeStyle="#000000",t.beginPath();var i=t.graphicsMap;i||(i=s(t));for(var e=this.$commands,n=e.length,r=0;n>r;r++){var a=e[r];i[a.type].apply(t,a.arguments)}t.restore()},f}(t.LarkObject);t.Graphics=d,t.registerClass(d,"lark.Graphics")}(lark||(lark={}));var lark;!function(t){var i=[],e=function(e){function n(t){void 0===t&&(t=null),e.call(this),this.$EventEmitter={0:t?t:this,1:{},2:{},3:0}}__extends(n,e);var s=n;return p=s.prototype,p.on=function(t,i,e,n,s){this.$addListener(t,i,e,n,s)},p.once=function(t,i,e,n,s){this.$addListener(t,i,e,n,s,!0)},p.$addListener=function(t,i,e,n,s,r){var a=this.$EventEmitter,h=n?a[2]:a[1],o=h[t];o?0!==a[3]&&(h[t]=o=o.concat()):o=h[t]=[],s=0|+s;for(var l=-1,c=o.length,u=0;c>u;u++){var d=o[u];if(d.listener===i&&d.thisObject===e&&d.target===this)return;-1===l&&d.priority<s&&(l=u)}var p={type:t,listener:i,thisObject:e,priority:s,target:this,useCapture:n,emitOnce:!!r};-1!==l?o.splice(l,0,p):o.push(p)},p.removeListener=function(t,i,e,n){var s=this.$EventEmitter,r=n?s[2]:s[1],a=r[t];if(a){0!==s[3]&&(r[t]=a=a.concat());for(var h=a.length,o=0;h>o;o++){var l=a[o];if(l.listener===i&&l.thisObject===e&&l.target===this){a.splice(o,1);break}}0==a.length&&(r[t]=null)}},p.hasListener=function(t){var i=this.$EventEmitter;return!(!i[1][t]&&!i[2][t])},p.willTrigger=function(t){return this.hasListener(t)},p.emit=function(t){return t.$target=t.$currentTarget=this.$EventEmitter[0],this.$notifyListener(t,!1)},p.$notifyListener=function(t,e){var n=this.$EventEmitter,s=e?n[2]:n[1],r=s[t.$type];if(!r)return!0;var a=r.length;if(0===a)return!0;var h=i;n[3]++;for(var o=0;a>o;o++){var l=r[o];if(l.listener.call(l.thisObject,t),l.emitOnce&&h.push(l),t.$isPropagationImmediateStopped)break}for(n[3]--;h.length;)l=h.pop(),l.target.removeListener(l.type,l.listener,l.thisObject,l.useCapture);return!t.$isDefaultPrevented},p.emitWith=function(i,e,n,s){if(e||this.hasListener(i)){var r=t.Event.create(t.Event,i,e,n);r.data=s;var a=this.emit(r);return t.Event.release(r),a}return!0},n}(t.LarkObject);t.EventEmitter=e,t.registerClass(e,"lark.EventEmitter",["lark.IEventEmitter"])}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(i,e,n,s){t.call(this),this.$eventPhase=2,this.$currentTarget=null,this.$target=null,this.$isDefaultPrevented=!1,this.$isPropagationStopped=!1,this.$isPropagationImmediateStopped=!1,this.$type=i,this.$bubbles=!!e,this.$cancelable=!!n,this.data=s}__extends(i,t);var e=__define,n=i;return p=n.prototype,e(p,"type",function(){return this.$type},void 0),e(p,"bubbles",function(){return this.$bubbles},void 0),e(p,"cancelable",function(){return this.$cancelable},void 0),e(p,"eventPhase",function(){return this.$eventPhase},void 0),e(p,"currentTarget",function(){return this.$currentTarget},void 0),e(p,"target",function(){return this.$target},void 0),p.isDefaultPrevented=function(){return this.$isDefaultPrevented},p.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},p.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},p.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},p.clean=function(){this.data=this.$target=this.$currentTarget=null},i.create=function(t,i,e,n){var s=t.eventPool;if(s||(s=t.eventPool=[]),s.length){var r=s.pop();return r.$type=i,r.$bubbles=!!e,r.$cancelable=!!n,r.$isDefaultPrevented=!1,r.$isPropagationStopped=!1,r.$isPropagationImmediateStopped=!1,r.$eventPhase=2,r}return new t(i,e,n)},i.release=function(t){t.clean();var i=Object.getPrototypeOf(t).constructor;i.eventPool.push(t)},i.ADDED_TO_STAGE="addedToStage",i.REMOVED_FROM_STAGE="removedFromStage",i.ADDED="added",i.REMOVED="removed",i.ENTER_FRAME="enterFrame",i.RENDER="render",i.RESIZE="resize",i.CHANGE="change",i.CHANGING="changing",i.COMPLETE="complete",i.IO_ERROR="ioError",i.FOCUS_IN="focusIn",i.FOCUS_OUT="focusOut",i.ENDED="ended",i}(t.LarkObject);t.Event=i,t.registerClass(i,"lark.Event")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(){t.apply(this,arguments)}__extends(i,t);var e=i;return p=e.prototype,i}(t.Event);t.MotionEvent=i,t.registerClass(i,"lark.MotionEvent")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(t,e,n,s,r){i.call(this,t,e,n),this.bytesLoaded=0,this.bytesTotal=0,this.bytesLoaded=+s||0,this.bytesTotal=+r||0}__extends(e,i);var n=e;return p=n.prototype,e.emitProgressEvent=function(i,n,s,r){var a=t.Event.create(e,n);a.bytesLoaded=+s||0,a.bytesTotal=+r||0;var h=i.emit(a);return t.Event.release(a),h},e.PROGRESS="progress",e}(t.Event);t.ProgressEvent=i,t.registerClass(i,"lark.ProgressEvent")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(t,e,n,s,r,a){i.call(this,t,e,n),this.$setTo(s,r,a)}__extends(e,i);var n=__define,s=e;return p=s.prototype,p.$setTo=function(t,i,e){this.touchPointID=+e||0,this.$stageX=+t||0,this.$stageY=+i||0},n(p,"stageX",function(){return this.$stageX},void 0),n(p,"stageY",function(){return this.$stageY},void 0),p.getLocalXY=function(){if(!this.localPoint){this.localPoint=new t.Point;var i=this.target.$getInvertedConcatenatedMatrix();i.transformPoint(this.stageX,this.stageY,this.localPoint)}return this.localPoint},n(p,"localX",function(){return this.getLocalXY().x},void 0),n(p,"localY",function(){return this.getLocalXY().y},void 0),p.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},e.emitTouchEvent=function(i,n,s,r,a,h,o){if(!s&&!i.hasListener(n))return!0;var l=t.Event.create(e,n,s,r);l.$setTo(a,h,o);var c=i.emit(l);return t.Event.release(l),c},e.TOUCH_MOVE="touchMove",e.TOUCH_BEGIN="touchBegin",e.TOUCH_END="touchEnd",e.TOUCH_TAP="touchTap",e.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",e}(t.Event);t.TouchEvent=i,t.registerClass(i,"lark.TouchEvent")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(t,e,n){i.call(this,t,e,n)}__extends(e,i);var n=e;return p=n.prototype,p.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},e.emitTimerEvent=function(i,n,s,r){var a=t.Event.create(e,n,s,r),h=i.emit(a);return t.Event.release(a),h},e.TIMER="timer",e.TIMER_COMPLETE="timerComplete",e}(t.Event);t.TimerEvent=i,t.registerClass(i,"lark.TimerEvent")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(){t.apply(this,arguments)}__extends(i,t);var e=i;return p=e.prototype,i.PERMISSION_DENIED="permissionDenied",i.UNAVAILABLE="unavailable",i}(t.Event);t.GeolocationEvent=i,t.registerClass(i,"lark.GeolocationEvent")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(){t.apply(this,arguments)}__extends(i,t);var e=i;return p=e.prototype,i}(t.Event);t.OrientationEvent=i,t.registerClass(i,"lark.OrientationEvent")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(t,e){void 0===e&&(e=0),i.call(this),this._delay=0,this._currentCount=0,this._running=!1,this.updateInterval=1e3,this.lastCount=1e3,this.delay=t,this.repeatCount=0|+e}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"delay",function(){return this._delay},function(t){t=+t||0,1>t&&(t=1),this._delay!==t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))}),n(p,"currentCount",function(){return this._currentCount},void 0),n(p,"running",function(){return this._running},void 0),p.reset=function(){this.stop(),this._currentCount=0},p.start=function(){this._running||(t.startTick(this.$update,this),this._running=!0)},p.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},p.$update=function(){if(this.lastCount-=1e3,!(this.lastCount>0)){this.lastCount+=this.updateInterval,this._currentCount++;var i=this.repeatCount>0&&this._currentCount>=this.repeatCount;t.TimerEvent.emitTimerEvent(this,t.TimerEvent.TIMER),i&&(this.stop(),t.TimerEvent.emitTimerEvent(this,t.TimerEvent.TIMER_COMPLETE))}},e}(t.EventEmitter);t.Timer=i,t.registerClass(i,"lark.Timer")}(lark||(lark={}));var lark;!function(t){var i=[],e=function(t){function e(i,e,n,s){void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),t.call(this),this.x=i,this.y=e,this.width=n,this.height=s}__extends(e,t);var n=__define,s=e;return p=s.prototype,e.release=function(t){t&&i.push(t)},e.create=function(){var t=i.pop();return t||(t=new e),t},n(p,"right",function(){return this.x+this.width},function(t){this.width=t-this.x}),n(p,"bottom",function(){return this.y+this.height},function(t){this.height=t-this.y}),n(p,"left",function(){return this.x},function(t){this.width+=this.x-t,this.x=t}),n(p,"top",function(){return this.y},function(t){this.height+=this.y-t,this.y=t}),p.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},p.setTo=function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},p.contains=function(t,i){return this.x<=t&&this.x+this.width>=t&&this.y<=i&&this.y+this.height>=i},p.intersection=function(t){return this.clone().$intersectInPlace(t)},p.$intersectInPlace=function(t){var i=this.x,e=this.y,n=t.x,s=t.y,r=Math.max(i,n),a=Math.min(i+this.width,n+t.width);if(a>=r){var h=Math.max(e,s),o=Math.min(e+this.height,s+t.height);if(o>=h)return this.setTo(r,h,a-r,o-h),this}return this.setEmpty(),this},p.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},p.isEmpty=function(){return this.width<=0||this.height<=0},p.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},p.clone=function(){return new e(this.x,this.y,this.width,this.height)},p.$getBaseWidth=function(t){var i=Math.abs(Math.cos(t)),e=Math.abs(Math.sin(t));return i*this.width+e*this.height},p.$getBaseHeight=function(t){var i=Math.abs(Math.cos(t)),e=Math.abs(Math.sin(t));return e*this.width+i*this.height},e}(t.LarkObject);t.Rectangle=e,t.registerClass(e,"lark.Rectangle"),t.$TempRectangle=new e}(lark||(lark={}));var lark;!function(t){function i(t){switch(t){case s:case-r:return 0;case n:case-n:return-1;case r:case-s:return 0;default:return Math.cos(t)}}function e(t){switch(t){case s:case-r:return 1;case n:case-n:return 0;case r:case-s:return-1;default:return Math.sin(t)}}var n=Math.PI,s=n/2,r=n+s,a=2*n,h=[],o=function(s){function r(t,i,e,n,r,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===a&&(a=0),s.call(this),this.a=t,this.b=i,this.c=e,this.d=n,this.tx=r,this.ty=a}__extends(r,s);var o=r;return p=o.prototype,r.release=function(t){t&&h.push(t)},r.create=function(){var t=h.pop();return t||(t=new r),t},p.clone=function(){return new r(this.a,this.b,this.c,this.d,this.tx,this.ty)},p.concat=function(t){var i=this.a*t.a,e=0,n=0,s=this.d*t.d,r=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(i+=this.b*t.c,s+=this.c*t.b,e+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,r+=this.ty*t.c,a+=this.tx*t.b),this.a=i,this.b=e,this.c=n,this.d=s,this.tx=r,this.ty=a},p.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},p.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},p.invert=function(){this.$invertInto(this)},p.$invertInto=function(t){var i=this.a,e=this.b,n=this.c,s=this.d,r=this.tx,a=this.ty;if(0===e&&0===n)return t.b=t.c=0,void(0===i||0===s?t.a=t.d=t.tx=t.ty=0:(i=t.a=1/i,s=t.d=1/s,t.tx=-i*r,t.ty=-s*a));var h=i*s-e*n;if(0===h)return void t.identity();h=1/h;var o=t.a=s*h;e=t.b=-e*h,n=t.c=-n*h,s=t.d=i*h,t.tx=-(o*r+n*a),t.ty=-(e*r+s*a)},p.rotate=function(t){if(t=+t,0!==t){var n=i(t),s=e(t),r=this.a,a=this.b,h=this.c,o=this.d,l=this.tx,c=this.ty;this.a=r*n-a*s,this.b=r*s+a*n,this.c=h*n-o*s,this.d=h*s+o*n,this.tx=l*n-c*s,this.ty=l*s+c*n}},p.scale=function(t,i){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==i&&(this.b*=i,this.d*=i,this.ty*=i)},p.setTo=function(t,i,e,n,s,r){return this.a=t,this.b=i,this.c=e,this.d=n,this.tx=s,this.ty=r,this},p.transformPoint=function(i,e,n){var s=this.a*i+this.c*e+this.tx,r=this.b*i+this.d*e+this.ty;return n?(n.setTo(s,r),n):new t.Point(s,r)},p.translate=function(t,i){this.tx+=t,this.ty+=i},p.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.tx===t.tx&&this.ty===t.ty},p.$transformBounds=function(t){var i=this.a,e=this.b,n=this.c,s=this.d,r=this.tx,a=this.ty,h=t.x,o=t.y,l=h+t.width,c=o+t.height,u=i*h+n*o+r,d=e*h+s*o+a,p=i*l+n*o+r,f=e*l+s*o+a,$=i*l+n*c+r,v=e*l+s*c+a,g=i*h+n*c+r,m=e*h+s*c+a,y=0;u>p&&(y=u,u=p,p=y),$>g&&(y=$,$=g,g=y),t.x=Math.floor($>u?u:$),t.width=Math.ceil((p>g?p:g)-t.x),d>f&&(y=d,d=f,f=y),v>m&&(y=v,v=m,m=y),t.y=Math.floor(v>d?d:v),t.height=Math.ceil((f>m?f:m)-t.y)},p.getDeterminant=function(){return this.a*this.d-this.b*this.c},p.$getScaleX=function(){var t=this;if(1===t.a&&0===t.b)return 1;var i=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-i:i},p.$getScaleY=function(){var t=this;if(0===t.c&&1===t.d)return 1;var i=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-i:i},p.$getSkewX=function(){return Math.atan2(this.d,this.c)-n/2},p.$getSkewY=function(){return Math.atan2(this.b,this.a)},p.$updateScaleAndRotation=function(t,n,s,r){if(!(0!==s&&s!==a||0!==r&&r!==a))return this.a=t,this.b=this.c=0,void(this.d=n);var h=i(s),o=e(s);s===r?(this.a=h*t,this.b=o*t):(this.a=i(r)*t,this.b=e(r)*t),this.c=-o*n,this.d=h*n},p.$preMultiplyInto=function(t,i){var e=t.a*this.a,n=0,s=0,r=t.d*this.d,a=t.tx*this.a+this.tx,h=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(e+=t.b*this.c,r+=t.c*this.b,n+=t.a*this.b+t.b*this.d,s+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,h+=t.tx*this.b),i.a=e,i.b=n,i.c=s,i.d=r,i.tx=a,i.ty=h
},r}(t.LarkObject);t.Matrix=o,t.registerClass(o,"lark.Matrix"),t.$TempMatrix=new o}(lark||(lark={}));var lark;!function(t){function i(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var e=function(e){function n(){e.call(this),this.$children=null,this.$parent=null,this.$stage=null,this.$nestLevel=0,this.$visible=!0,this.$displayList=null,this.$alpha=1,this.$scrollRect=null,this.$clipRect=null,this.$parentClipRect=null,this.$blendMode=0,this.$maskedObject=null,this.$mask=null,this.$parentDisplayList=null,this.$isDirty=!1,this.$renderAlpha=1,this.$renderMatrix=new t.Matrix,this.$renderRegion=null,this.$displayFlags=3952,this.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new t.Matrix,7:new t.Matrix,8:new t.Rectangle,9:new t.Rectangle}}__extends(n,e);var s=__define,r=n;return p=r.prototype,p.$setFlags=function(t){this.$displayFlags|=t},p.$toggleFlags=function(t,i){i?this.$displayFlags|=t:this.$displayFlags&=~t},p.$removeFlags=function(t){this.$displayFlags&=~t},p.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var i=this.$parent;i&&i.$removeFlagsUp(t)}},p.$hasFlags=function(t){return(this.$displayFlags&t)===t},p.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var i=this.$parent;i&&i.$propagateFlagsUp(t)}},p.$propagateFlagsDown=function(t){this.$setFlags(t)},p.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},p.invalidateMatrix=function(){this.$setFlags(8),this.invalidatePosition()},p.invalidatePosition=function(){this.$invalidateTransform(),this.$propagateFlagsDown(48),this.$parent&&this.$parent.$propagateFlagsUp(4)},s(p,"name",function(){return this.$DisplayObject[5]},function(t){this.$DisplayObject[5]=t}),s(p,"parent",function(){return this.$parent},void 0),p.$setParent=function(t){this.$parent=t},p.$onAddToStage=function(i,e){this.$stage=i,this.$nestLevel=e,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},p.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},s(p,"stage",function(){return this.$stage},void 0),s(p,"matrix",function(){return this.$getMatrix().clone()},function(t){this.$setMatrix(t)}),p.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},p.$setMatrix=function(t){var e=this.$DisplayObject,n=e[6];n.equals(t)||(n.copyFrom(t),e[0]=n.$getScaleX(),e[1]=n.$getScaleY(),e[2]=t.$getSkewX(),e[3]=t.$getSkewY(),e[4]=i(180*e[3]/Math.PI),this.$removeFlags(8),this.invalidatePosition())},p.$getConcatenatedMatrix=function(){var i=this.$renderMatrix;if(this.$hasFlags(16)){if(this.$parent){this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),i);var e=this.$scrollRect;if(e){var n=this.$clipRect;n.setTo(0,0,e.width,e.height),i.$transformBounds(n);var s=this.$parentClipRect;s&&n.$intersectInPlace(s),i.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-e.x,-e.y),i)}}else i.copyFrom(this.$getMatrix());this.$displayList&&(this.$displayList.$renderRegion.moved=!0),this.$renderRegion&&(this.$renderRegion.moved=!0),this.$removeFlags(16)}return i},p.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[7]),this.$removeFlags(32)),t[7]},s(p,"x",function(){return this.$getX()},function(t){this.$setX(t)}),p.$getX=function(){return this.$DisplayObject[6].tx},p.$setX=function(t){t=+t||0;var i=this.$DisplayObject[6];return t===i.tx?!1:(i.tx=t,this.invalidatePosition(),!0)},s(p,"y",function(){return this.$getY()},function(t){this.$setY(t)}),p.$getY=function(){return this.$DisplayObject[6].ty},p.$setY=function(t){t=+t||0;var i=this.$DisplayObject[6];return t===i.ty?!1:(i.ty=t,this.invalidatePosition(),!0)},s(p,"scaleX",function(){return this.$DisplayObject[0]},function(t){this.$setScaleX(t)}),p.$setScaleX=function(t){t=+t||0;var i=this.$DisplayObject;return t===i[0]?!1:(i[0]=t,this.invalidateMatrix(),!0)},s(p,"scaleY",function(){return this.$DisplayObject[1]},function(t){this.$setScaleY(t)}),p.$setScaleY=function(t){return t=+t||0,t===this.$DisplayObject[1]?!1:(this.$DisplayObject[1]=t,this.invalidateMatrix(),!0)},s(p,"rotation",function(){return this.$DisplayObject[4]},function(t){t=+t||0,t=i(t);var e=this.$DisplayObject;if(t!==e[4]){var n=t-e[4],s=n/180*Math.PI;e[2]+=s,e[3]+=s,e[4]=t,this.invalidateMatrix()}}),s(p,"width",function(){return this.$getWidth()},function(t){this.$setWidth(t)}),p.$getWidth=function(){return this.$getTransformedBounds(this.$parent,t.$TempRectangle).width},p.$setWidth=function(i){if(i=+i||0,!(0>i)){var e=this.$DisplayObject,n=this.$getOriginalBounds(),s=this.$getTransformedBounds(this.$parent,t.$TempRectangle),r=e[4]/180*Math.PI,a=n.$getBaseWidth(r);if(a){var h=n.$getBaseHeight(r);e[1]=s.height/h,e[0]=i/a,this.invalidateMatrix()}}},s(p,"height",function(){return this.$getHeight()},function(t){this.$setHeight(t)}),p.$getHeight=function(){return this.$getTransformedBounds(this.$parent,t.$TempRectangle).height},p.$setHeight=function(i){if(i=+i||0,!(0>i)){var e=this.$DisplayObject,n=this.$getOriginalBounds(),s=this.$getTransformedBounds(this.$parent,t.$TempRectangle),r=e[4]/180*Math.PI,a=n.$getBaseHeight(r);if(a){var h=n.$getBaseWidth(r);e[1]=i/a,e[0]=s.width/h,this.invalidateMatrix()}}},s(p,"visible",function(){return this.$visible},function(t){t=!!t,t!==this.$visible&&(this.$visible=t,this.$invalidateTransform())}),s(p,"cacheAsBitmap",function(){return this.$hasFlags(128)},function(i){i=!!i,this.$toggleFlags(128,i);var e=!!this.$displayList;if(e!==i)if(i){var n=t.sys.DisplayList.create(this);n&&(this.$displayList=n,this.$parentDisplayList&&this.$parentDisplayList.markDirty(n),this.$cacheAsBitmapChanged())}else t.sys.DisplayList.release(this.$displayList),this.$displayList=null,this.$cacheAsBitmapChanged()}),p.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderRegion&&t.markDirty(this)},s(p,"alpha",function(){return this.$alpha},function(t){t=+t||0,t!==this.$alpha&&(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(!0))}),p.$getConcatenatedAlpha=function(){if(this.$hasFlags(64)){if(this.$parent){var t=this.$parent.$getConcatenatedAlpha();this.$renderAlpha=t*this.$alpha}else this.$renderAlpha=this.$alpha;this.$removeFlags(64)}return this.$renderAlpha},s(p,"touchEnabled",function(){return this.$hasFlags(1024)},function(t){this.$setTouchEnabled(t)}),p.$setTouchEnabled=function(t){this.$toggleFlags(1024,!!t)},s(p,"pixelHitTest",function(){return this.$hasFlags(1)},function(t){this.$toggleFlags(1,!!t)}),s(p,"scrollRect",function(){return this.$scrollRect?this.$scrollRect.clone():null},function(i){if(i||this.$scrollRect){var e=!1;i?(this.$scrollRect||(e=!0,this.$clipRect=new t.Rectangle,this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(i)):(e=!0,this.$clipRect=null,this.$scrollRect=null),e&&this.$scrollRectChanged(),this.invalidatePosition()}}),p.$scrollRectChanged=function(){},s(p,"blendMode",function(){return t.sys.numberToBlendMode(this.$blendMode)},function(i){var e=t.sys.blendModeToNumber(i);e!==this.$blendMode&&(this.$blendMode=e,this.$invalidateTransform())}),s(p,"mask",function(){return this.$mask},function(t){t!==this.$mask&&t!==this&&(t&&(t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this),this.$mask=t,this.$invalidateTransform())}),p.getBounds=function(t,i){return t=t||this,this.$getTransformedBounds(t,i)},p.$getTransformedBounds=function(i,e){var n=this.$getOriginalBounds();if(e||(e=new t.Rectangle),e.copyFrom(n),i===this||e.isEmpty())return e;var s;if(i){s=t.$TempMatrix;var r=i.$getInvertedConcatenatedMatrix();r.$preMultiplyInto(this.$getConcatenatedMatrix(),s)}else s=this.$getConcatenatedMatrix();return s.$transformBounds(e),e},p.globalToLocal=function(t,i,e){var n=this.$getInvertedConcatenatedMatrix();return n.transformPoint(t,i,e)},p.localToGlobal=function(t,i,e){var n=this.$getConcatenatedMatrix();return n.transformPoint(t,i,e)},p.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},p.$getOriginalBounds=function(){var t=this.$DisplayObject[8];return this.$hasFlags(4)&&(t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderRegion.moved=!0)),t},p.$measureChildBounds=function(){},p.$getContentBounds=function(){var t=this.$DisplayObject[9];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderRegion&&(this.$renderRegion.moved=!0),this.$removeFlags(2)),t},p.$measureContentBounds=function(){},p.$invalidate=function(){if(this.$renderRegion&&!this.$hasFlags(256)){this.$setFlags(256);var t=this.$displayList?this.$displayList:this.$parentDisplayList;t&&t.markDirty(this)}},p.$invalidateTransform=function(){if(!this.$hasFlags(512)){this.$setFlags(512);var t=this.$displayList;(t||this.$renderRegion)&&this.$parentDisplayList&&this.$parentDisplayList.markDirty(t||this)}},p.$update=function(){this.$removeFlagsUp(768),this.$getConcatenatedAlpha();var t=this.$getConcatenatedMatrix(),i=this.$getContentBounds(),e=this.$stage;if(!e)return!1;var n=this.$renderRegion;if(!n.moved)return!1;n.moved=!1;var s=this.$clipRect||this.$parentClipRect;return n.updateRegion(i,t,s),!0},p.$render=function(){},p.$hitTest=function(t,i,e){if(!this.$renderRegion||!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix(),s=this.$getContentBounds(),r=n.a*t+n.c*i+n.tx,a=n.b*t+n.d*i+n.ty;if(s.contains(r,a)){if(!this.$children){if(this.$scrollRect&&!this.$scrollRect.contains(r,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,i,!0))return null}return e||1&this.$displayFlags?this.hitTestPixel(r,a):this}return null},p.hitTestPixel=function(i,e){var n=this.$getConcatenatedAlpha();if(0===n)return null;var s,r,a=this.$displayList;return a?(s=a.renderContext,r=s.getImageData(i-a.offsetX,e-a.offsetY,1,1).data):(s=t.sys.sharedRenderContext,s.surface.width=s.surface.height=3,s.translate(1-i,1-e),this.$render(s),r=s.getImageData(1,1,1,1).data),0===r[3]?null:this},p.$addListener=function(i,s,r,a,h,o){e.prototype.$addListener.call(this,i,s,r,a,h,o);var l=i==t.Event.ENTER_FRAME;if(l||i==t.Event.RENDER){var c=l?n.$enterFrameCallBackList:n.$renderCallBackList;-1==c.indexOf(this)&&c.push(this)}},p.removeListener=function(i,s,r,a){e.prototype.removeListener.call(this,i,s,r,a);var h=i==t.Event.ENTER_FRAME;if((h||i==t.Event.RENDER)&&!this.hasListener(i)){var o=h?n.$enterFrameCallBackList:n.$renderCallBackList,l=o.indexOf(this);-1!==l&&o.splice(l,1)}},p.emit=function(t){if(!t.$bubbles)return e.prototype.emit.call(this,t);var i=this.$getPropagationList(this),n=.5*i.length;return t.$target=this,this.$emitPropagationEvent(t,i,n),!t.$isDefaultPrevented},p.$getPropagationList=function(t){for(var i=[];t;)i.push(t),t=t.$parent;var e=i.concat();return e.reverse(),i=e.concat(i)},p.$emitPropagationEvent=function(t,i,e){for(var n=i.length,s=e-1,r=0;n>r;r++){var a=i[r];if(t.$currentTarget=a,t.$eventPhase=s>r?1:r==e||r==s?2:3,a.$notifyListener(t,e>r),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},p.willTrigger=function(t){for(var i=this;i;){if(i.hasListener(t))return!0;i=i.$parent}return!1},n.$enterFrameCallBackList=[],n.$renderCallBackList=[],n}(t.EventEmitter);t.DisplayObject=e,t.registerClass(e,"lark.DisplayObject",["lark.sys.Renderable"])}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this.$graphics=new t.Graphics,this.$graphics.$targetDisplay=this,this.$renderRegion=new t.sys.Region,this.pixelHitTest=!0}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"graphics",function(){return this.$graphics},void 0),p.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},p.$render=function(t){this.$graphics.$render(t)},e}(t.DisplayObject);t.Shape=i,t.registerClass(i,"lark.Shape")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(e){i.call(this),this.$smoothing=!0,this.$renderRegion=new t.sys.Region,this.bitmapData=e}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"bitmapData",function(){return this.$bitmapData},function(t){this.$setBitmapData(t)}),p.$setBitmapData=function(t){t!=this.$bitmapData&&(this.$bitmapData=t,this.$invalidateContentBounds())},n(p,"smoothing",function(){return this.$smoothing},function(t){t=!!t,t!==this.$smoothing&&(this.$smoothing=t,this.$invalidate())}),p.$measureContentBounds=function(t){var i=this.$bitmapData;i?t.setTo(0,0,i.width,i.height):t.setEmpty()},p.$render=function(t){var i=this.$bitmapData;i&&(t.imageSmoothingEnabled=this.$smoothing,t.drawImage(i,0,0))},e}(t.DisplayObject);t.Bitmap=i,t.registerClass(i,"lark.Bitmap")}(lark||(lark={}));var lark;!function(t){function i(i,e,n){for(var s,r=0,a=i.length,h=0;a>h;h++){var o=i.charAt(h),l=t.TextMeasurer.measureText(o,n);if(r+l>e){s=h;break}r+=l}return 0==s?1:s}var e=function(e){function n(i){e.call(this),this.textLines=[],this.$renderRegion=new t.sys.Region,this.$TextField={0:30,1:0,2:0,3:0/0,4:0/0,5:0,6:0,7:0,8:"sans-serif",9:"left",10:"top",11:"#000000",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!0,20:!1,21:0},this.text=i}__extends(n,e);var s=__define,r=n;return p=r.prototype,s(p,"fontFamily",function(){return this.$TextField[8]},function(t){var i=this.$TextField;i[8]!=t&&(i[8]=t,this.invalidateFontString())}),s(p,"fontSize",function(){return this.$TextField[0]},function(t){t=+t||0;var i=this.$TextField;i[0]!==t&&(i[0]=t,this.invalidateFontString())}),s(p,"bold",function(){return this.$TextField[15]},function(t){t=!!t;var i=this.$TextField;t!==i[15]&&(i[15]=t,this.invalidateFontString())}),s(p,"italic",function(){return this.$TextField[16]},function(t){t=!!t;var i=this.$TextField;t!==i[16]&&(i[16]=t,this.invalidateFontString())}),p.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateContentBounds()},p.getFontString=function(){var i=this.$TextField;return i[17]&&(i[17]=!1,i[12]=t.sys.toFontString(this)),i[12]},s(p,"textAlign",function(){return this.$TextField[9]},function(t){var i=this.$TextField;i[9]!=t&&(i[9]=t,this.$invalidateContentBounds())}),s(p,"verticalAlign",function(){return this.$TextField[10]},function(t){var i=this.$TextField;i[10]!=t&&(i[10]=t,this.$invalidateContentBounds())}),s(p,"lineSpacing",function(){return this.$TextField[1]},function(t){t=+t||0;var i=this.$TextField;i[1]!==t&&(i[1]=t,this.$invalidateContentBounds())}),s(p,"textColor",function(){return this.$TextField[2]},function(i){i=0|+i;var e=this.$TextField;e[2]!==i&&(e[2]=i,e[11]=t.sys.toColorString(i),this.$invalidate())}),s(p,"wordWrap",function(){return this.$TextField[19]},function(t){t=!!t;var i=this.$TextField;t!==i[19]&&(i[20]||(i[19]=t,this.$invalidateContentBounds()))}),s(p,"text",function(){return this.$TextField[13]},function(t){(null===t||void 0===t)&&(t=""),t+="",this.$setText(t)}),p.$setText=function(t){var i=this.$TextField;t!=i[13]&&(i[13]=t,this.$invalidateContentBounds())},s(p,"numLines",function(){return this.textLines.length},void 0),s(p,"textWidth",function(){return this.updateTextLines(),this.$TextField[5]},void 0),s(p,"textHeight",function(){return this.updateTextLines(),this.$TextField[6]},void 0),p.$getWidth=function(){var t=this.$TextField[3];return isNaN(t)?this.$getContentBounds().width:t},p.$setWidth=function(t){t=+t;var i=this.$TextField;0>t||t===i[3]||(i[3]=t,this.$invalidateContentBounds())},p.$getHeight=function(){var t=this.$TextField[4];return isNaN(t)?this.$getContentBounds().height:t},p.$setHeight=function(t){t=+t;var i=this.$TextField;0>t||t===i[4]||(i[4]=t,this.$invalidateContentBounds())},p.$invalidateContentBounds=function(){e.prototype.$invalidateContentBounds.call(this),this.$TextField[18]=!0},p.$measureContentBounds=function(t){this.updateTextLines();var i,e=this.$TextField;if(isNaN(e[4]))i=e[6];else{i=e[4];var n=e[0]+4;n>i&&(i=n)}var s=isNaN(e[3])?e[5]:e[3];s<e[7]&&(s=e[7]),t.setTo(0,0,s,i)},p.$render=function(i){var e=this.updateTextLines();if(e){var n=this.$TextField;i.textAlign="left",i.textBaseline="middle",i.font=this.getFontString(),i.fillStyle=n[11];var s=e.length,r=n[0],a=.5*r,h=a+2,o=r+n[1],l=n[6],c=!isNaN(n[4]),u=c?n[4]:Number.POSITIVE_INFINITY;if(c&&u>l){var d=0;n[10]==t.VerticalAlign.MIDDLE?d=.5:n[10]==t.VerticalAlign.BOTTOM&&(d=1),h+=d*(u-l)}h=Math.round(h);var p=0;n[9]==t.HorizontalAlign.CENTER?p=.5:n[9]==t.HorizontalAlign.RIGHT&&(p=1);var f,$=n[14];f=isNaN(n[3])?n[5]:n[3];for(var v=u-2,g=0;s>g;g++){var m=e[g],y=$[g],x=Math.round((f-y)*p);0>x&&(x=0),(v>=h+a||0===g)&&i.fillText(m,x,h),h+=o}}},p.updateTextLines=function(){var e=this.$TextField;if(!e[18])return this.textLines;this.textLines.length=0;var n=e[14];n.length=0,e[5]=0,e[6]=0;var s=e[3],r=e[13];if(!r||0===s)return null;var a=e[20];if(a){for(var h=r.length,o="",l=0;h>l;l++)o+="•";r=o}var c,u=!isNaN(s),d=this.getFontString(),p=r.split(/(?:\r\n|\r|\n)/),f=p.length,$=0,v=0;if(u&&e[19]){for(var l=0;f>l;l++){var g=p[l],m=t.TextMeasurer.measureText(g,d);if(m>s){for(var y="",x=0,T=this.$splitWords(g),k=T.length,C=0;k>C;C++){var R=T[C];m=t.TextMeasurer.measureText(R,d),x+m>s&&(0===x?(c=i(R,s,d),T.splice(C+1,0,R.substring(c)),R=R.substring(0,c),m=t.TextMeasurer.measureText(R,d),p.splice(l,0,R),n[l]=m,k++,m>$&&($=m),m=0,R=""):(p.splice(l,0,y),n[l]=x,x>$&&($=x),y="",x=0,m>s&&(m=0,R="",C--)),l++,f++),x+=m,y+=R}p[l]=y,n[l]=x}else n[l]=m,m>$&&($=m)}v=Math.max(v,$)}else for(l=0;f>l;l++)g=p[l],m=t.TextMeasurer.measureText(g,d),u&&m>s&&(c=i(g,s,d),g=p[l]=g.substring(0,c),v=Math.max(v,t.TextMeasurer.measureText(g,d))),n[l]=m,m>$&&($=m);return e[7]=v,e[5]=Math.ceil($),e[6]=Math.ceil(p.length*(e[0]+e[1])-e[1]+4),this.textLines=p,p},p.$splitWords=function(t){return t.split(/\b/)},n}(t.DisplayObject);t.TextField=e,t.registerClass(e,"lark.TextField")}(lark||(lark={}));var lark;!function(t){var i;!function(t){function i(t){var i="";return t.italic&&(i+="italic "),t.bold&&(i+="bold "),i+=(t.fontSize||12)+"px ",i+=t.fontFamily||"sans-serif"}function e(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var i=t.toString(16).toUpperCase();i.length<6;)i="0"+i;return"#"+i}t.toFontString=i,t.toColorString=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this.$children=[]}__extends(e,i);var n=__define,s=e;return p=s.prototype,p.$propagateFlagsDown=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);for(var i=this.$children,e=0;e<i.length;e++)i[e].$propagateFlagsDown(t)}},n(p,"numChildren",function(){return this.$children.length},void 0),p.addChild=function(t){var i=this.$children.length;return t.$parent==this&&i--,this.doAddChild(t,i)},p.addChildAt=function(t,i){return i=0|+i,(0>i||i>=this.$children.length)&&(i=this.$children.length,t.$parent===this&&i--),this.doAddChild(t,i)},p.doAddChild=function(i,n){var s=i.$parent;if(s==this)return this.doSetChildIndex(i,n),i;s&&s.removeChild(i),this.$children.splice(n,0,i),i.$setParent(this);var r=this.$stage;if(r&&i.$onAddToStage(r,this.$nestLevel+1),i.emitWith(t.Event.ADDED,!0),r)for(var a=e.$EVENT_ADD_TO_STAGE_LIST;a.length;){var h=a.shift();h.$stage&&h.emitWith(t.Event.ADDED_TO_STAGE)}var o=this.$displayList||this.$parentDisplayList;this.assignParentDisplayList(i,o,o);var l=this.$clipRect||this.$parentClipRect;return this.assignParentClipRect(i,l),i.$propagateFlagsDown(624),this.$propagateFlagsUp(4),this.$childAdded(i,n),i},p.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},p.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},p.getChildIndex=function(t){return this.$children.indexOf(t)},p.getChildByName=function(t){for(var i,e=this.$children,n=e.length,s=0;n>s;s++)if(i=e[s],i.name==t)return i;return null},p.removeChild=function(t){var i=this.$children.indexOf(t);return i>=0?this.doRemoveChild(i):null},p.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.doRemoveChild(t):null},p.doRemoveChild=function(i){i=0|+i;var n=this.$children,s=n[i];if(this.$childRemoved(s,i),s.emitWith(t.Event.REMOVED,!0),this.$stage){s.$onRemoveFromStage();for(var r=e.$EVENT_REMOVE_FROM_STAGE_LIST;r.length>0;){var a=r.shift();a.emitWith(t.Event.REMOVED_FROM_STAGE),a.$stage=null}}var h=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(s,h,null),this.assignParentClipRect(s,null),s.$propagateFlagsDown(624),s.$setParent(null),n.splice(i,1),this.$propagateFlagsUp(4),s},p.setChildIndex=function(t,i){i=0|+i,(0>i||i>=this.$children.length)&&(i=this.$children.length-1),this.doSetChildIndex(t,i)},p.doSetChildIndex=function(t,i){var e=this.$children.indexOf(t);e!=i&&(this.$childRemoved(t,e),this.$children.splice(e,1),this.$children.splice(i,0,t),this.$childAdded(t,i),t.$invalidateTransform(),this.$propagateFlagsUp(4))},p.swapChildrenAt=function(t,i){t=0|+t,i=0|+i,t>=0&&t<this.$children.length&&i>=0&&i<this.$children.length&&this.doSwapChildrenAt(t,i)},p.swapChildren=function(t,i){var e=this.$children.indexOf(t),n=this.$children.indexOf(i);-1==e||-1==n||this.doSwapChildrenAt(e,n)},p.doSwapChildrenAt=function(t,i){if(t>i){var e=i;i=t,t=e}else if(t===i)return;var n=this.$children,s=n[t],r=n[i];this.$childRemoved(s,t),this.$childRemoved(r,i),n[t]=r,n[i]=s,this.$childAdded(r,t),this.$childAdded(s,i),s.$invalidateTransform(),r.$invalidateTransform(),this.$propagateFlagsUp(4)},p.removeChildren=function(){for(var t=this.$children,i=t.length-1;i>=0;i--)this.doRemoveChild(i)},p.$childAdded=function(){},p.$childRemoved=function(){},p.$onAddToStage=function(t,e){i.prototype.$onAddToStage.call(this,t,e);var n=this.$children,s=n.length;e++;for(var r=0;s>r;r++){var a=this.$children[r];a.$onAddToStage(t,e)}},p.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,e=t.length,n=0;e>n;n++){var s=t[n];s.$onRemoveFromStage()}},p.$measureChildBounds=function(i){var e=this.$children,n=e.length;if(0!==n){for(var s=0,r=0,a=0,h=0,o=!1,l=-1;n>l;l++){var c=-1===l?i:e[l].$getTransformedBounds(this,t.$TempRectangle);c.isEmpty()||(o?(s=Math.min(s,c.x),r=Math.max(r,c.x+c.width),a=Math.min(a,c.y),h=Math.max(h,c.y+c.height)):(o=!0,s=c.x,r=s+c.width,a=c.y,h=a+c.height))}i.setTo(s,a,r-s,h-a)}},n(p,"touchChildren",function(){return this.$hasFlags(2048)},function(t){this.$setTouchChildren(t)}),p.$setTouchChildren=function(t){this.$toggleFlags(2048,!!t)},p.$invalidate=function(t){if(i.prototype.$invalidate.call(this,t),t){var e=this.$displayList||this.$parentDisplayList,n=this.$children;if(n)for(var s=n.length-1;s>=0;s--)this.markChildDirty(n[s],e)}},p.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},p.markChildDirty=function(t,i){if(!t.$hasFlags(512)){t.$setFlags(512);var e=t.$displayList;if((e||t.$renderRegion)&&i&&i.markDirty(e||t),!e){var n=t.$children;if(n)for(var s=n.length-1;s>=0;s--)this.markChildDirty(n[s],i)}}},p.$cacheAsBitmapChanged=function(){i.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,e=this.$children,n=e.length-1;n>=0;n--)this.assignParentDisplayList(e[n],t,t)},p.assignParentDisplayList=function(t,i,e){t.$parentDisplayList=e,t.$setFlags(512);var n=t.$displayList;if((t.$renderRegion||n)&&i&&i.markDirty(n||t),!n){var s=t.$children;if(s)for(var r=s.length-1;r>=0;r--)this.assignParentDisplayList(s[r],i,e)}},p.$scrollRectChanged=function(){for(var t=this.$clipRect||this.$parentClipRect,i=this.$children,e=i.length-1;e>=0;e--)this.assignParentClipRect(i[e],t)},p.assignParentClipRect=function(t,i){if(t.$parentClipRect=i,!t.$clipRect&&!t.$displayList){var e=t.$children;if(e)for(var n=e.length-1;n>=0;n--)this.assignParentClipRect(e[n],i)}},p.$hitTest=function(t,e,n){if(!this.$visible)return null;var s=this.$getInvertedConcatenatedMatrix(),r=s.a*t+s.c*e+s.tx,a=s.b*t+s.d*e+s.ty;if(this.$scrollRect&&!this.$scrollRect.contains(r,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,e,!0))return null;for(var h=this.$children,o=!1,l=h.length-1;l>=0;l--){var c=h[l];if(!c.$maskedObject){var u=c.$hitTest(t,e,n);if(u){if(o=!0,u.$hasFlags(1024))break;u=null}}}return u?this.$hasFlags(2048)?u:this:o?this:i.prototype.$hitTest.call(this,t,e,n)},e.$EVENT_ADD_TO_STAGE_LIST=[],e.$EVENT_REMOVE_FROM_STAGE_LIST=[],e}(t.DisplayObject);t.Sprite=i,t.registerClass(i,"lark.Sprite",["lark.DisplayObjectContainer"])}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=[],n=["source-over","lighter","destination-out"],s="source-over",r=function(r){function a(e){r.call(this),this.$isDirty=!1,this.$renderAlpha=1,this.$renderRegion=new i.Region,this.surface=null,this.offsetX=0,this.offsetY=0,this.needRedraw=!1,this.rootMatrix=new t.Matrix,this.dirtyNodes={},this.dirtyNodeList=[],this.dirtyList=null,this.dirtyRegion=new i.DirtyRegion,this.sizeChanged=!0,this.root=e}__extends(a,r);var h=a;return p=h.prototype,a.release=function(t){i.surfaceFactory.release(t.surface),t.surface=null,t.renderContext=null,t.root=null,t.$renderMatrix=null,t.needRedraw=!1,t.$isDirty=!1,e.push(t)},a.create=function(n){var s=e.pop();s||(s=new t.sys.DisplayList(n));var r=i.surfaceFactory.create();return r?(s.surface=r,s.renderContext=r.renderContext,s):null},p.$update=function(){var t=this.root;t.$removeFlagsUp(768),this.$renderAlpha=t.$getConcatenatedAlpha(),this.$renderMatrix=t.$getConcatenatedMatrix();var i=t.$getOriginalBounds();if(this.needRedraw&&this.updateDirtyRegions(),!t.$stage)return!1;var e=this.$renderRegion;if(!e.moved)return!1;e.moved=!1;var n=t.$clipRect||t.$parentClipRect;return e.updateRegion(i,this.$renderMatrix,n),!0},p.$render=function(t){var i=this.surface;i&&t.drawImage(i,this.offsetX,this.offsetY)},p.setClipRect=function(t,i){this.dirtyRegion.setClipRect(t,i),this.rootMatrix=null;var e=this.renderContext.surface;e.width=t,e.height=i,this.surface=e},p.markDirty=function(t){var i=t.$hashCode;if(!this.dirtyNodes[i]&&(this.dirtyNodes[i]=!0,this.dirtyNodeList.push(t),!this.needRedraw)){this.needRedraw=!0;var e=this.root.$parentDisplayList;e&&e.markDirty(this)}},p.updateDirtyRegions=function(){var t=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes={};for(var i=this.dirtyRegion,e=t.length,n=0;e>n;n++){var s=t[n],r=s.$renderRegion;s.$renderAlpha>0&&i.addRegion(r)&&(s.$isDirty=!0);var a=s.$update();s.$renderAlpha>0&&(a||!s.$isDirty)&&i.addRegion(r)&&(s.$isDirty=!0)}return this.dirtyList=i.getDirtyRegions(),this.dirtyList},p.drawToSurface=function(){this.rootMatrix&&this.changeSurfaceSize();var t=this.renderContext;t.save(),t.beginPath();var i=this.dirtyList;this.dirtyList=null;for(var e=i.length,n=0;e>n;n++){var s=i[n];t.clearRect(s.minX,s.minY,s.width,s.height),t.rect(s.minX,s.minY,s.width,s.height)}t.clip();var r=this.drawDisplayObject(this.root,t,i,this.rootMatrix,null,null);return t.restore(),this.dirtyRegion.clear(),this.needRedraw=!1,r},p.drawDisplayObject=function(t,i,e,n,s,r){var a,h,o=0;if(s?(s.needRedraw&&(o+=s.drawToSurface()),a=s,h=1):t.$renderRegion&&(a=t,h=t.$renderAlpha),a){var l=a.$renderRegion;if(r&&!r.intersects(l))a.$isDirty=!1;else if(!a.$isDirty)for(var c=e.length,u=0;c>u;u++)if(l.intersects(e[u])){a.$isDirty=!0;break}if(a.$isDirty){o++,i.globalAlpha=h;var d=a.$renderMatrix;n?(i.transform(d.a,d.b,d.c,d.d,d.tx,d.ty),a.$render(i),i.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty)):(i.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),a.$render(i)),a.$isDirty=!1}}if(s)return o;var p=t.$children;if(p)for(var f=p.length,$=0;f>$;$++){var v=p[$];!v.$visible||v.$alpha<=0||v.$maskedObject||(o+=0!==v.$blendMode||v.$mask?this.drawWithClip(v,i,e,n,r):v.$scrollRect?this.drawWithScrollRect(v,i,e,n,r):this.drawDisplayObject(v,i,e,n,v.$displayList,r))}return o},p.drawWithClip=function(e,r,a,h,o){var l=0,c=0!==e.$blendMode;if(c){var u=n[e.$blendMode];u||(u=s)}var d,p=e.$scrollRect,f=e.$mask,$=e.$getConcatenatedMatrix();if(f){var v=f.$getOriginalBounds();d=i.Region.create(),d.updateRegion(v,f.$getConcatenatedMatrix(),null)}var g;if(p&&(g=i.Region.create(),g.updateRegion(p,$,null)),g&&d?(g.intersect(d),i.Region.release(d)):!g&&d&&(g=d),g){if(g.isEmpty()||o&&!o.intersects(g))return i.Region.release(g),l}else g=i.Region.create(),v=e.$getOriginalBounds(),g.updateRegion(v,e.$getConcatenatedMatrix(),null);for(var m=!1,y=a.length,x=0;y>x;x++)if(g.intersects(a[x])){m=!0;break}if(!m)return i.Region.release(g),l;var T=this.createRenderContext(g.width,g.height);if(!T)return l+=this.drawDisplayObject(e,r,a,h,e.$displayList,o),i.Region.release(g),l;if(p){var k=$;T.setTransform(k.a,k.b,k.c,k.d,k.tx-g.minX,k.ty-g.minY),T.beginPath(),T.rect(p.x,p.y,p.width,p.height),T.clip()}T.setTransform(1,0,0,1,-g.minX,-g.minY);var C=t.Matrix.create().setTo(1,0,0,1,-g.minX,-g.minY);if(l+=this.drawDisplayObject(e,T,a,C,e.$displayList,g),t.Matrix.release(C),f){var R=this.createRenderContext(g.width,g.height);if(!R)return l+=this.drawDisplayObject(e,r,a,h,e.$displayList,o),i.surfaceFactory.release(T.surface),i.Region.release(g),l;R.setTransform(1,0,0,1,-g.minX,-g.minY),C=t.Matrix.create().setTo(1,0,0,1,-g.minX,-g.minY);var b=this.drawDisplayObject(f,R,a,C,f.$displayList,g);t.Matrix.release(C),b>0&&(l+=b,T.globalCompositeOperation="destination-in",T.setTransform(1,0,0,1,0,0),T.globalAlpha=1,T.drawImage(R.surface,0,0)),i.surfaceFactory.release(R.surface)}return l>0&&(l++,c&&(r.globalCompositeOperation=u),h?(r.translate(g.minX,g.minY),r.drawImage(T.surface,0,0),r.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty)):(r.setTransform(1,0,0,1,g.minX,g.minY),r.drawImage(T.surface,0,0)),c&&(r.globalCompositeOperation=s)),i.surfaceFactory.release(T.surface),i.Region.release(g),l},p.drawWithScrollRect=function(t,e,n,s,r){var a=0,h=t.$scrollRect,o=t.$getConcatenatedMatrix(),l=i.Region.create();if(h.isEmpty()||l.updateRegion(h,o,null),l.isEmpty()||r&&!r.intersects(l))return i.Region.release(l),a;for(var c=!1,u=n.length,d=0;u>d;d++)if(l.intersects(n[d])){c=!0;break}return c?(e.save(),e.setTransform(o.a,o.b,o.c,o.d,o.tx,o.ty),e.beginPath(),e.rect(h.x,h.y,h.width,h.height),e.clip(),a+=this.drawDisplayObject(t,e,n,s,t.$displayList,l),e.restore(),i.Region.release(l),a):(i.Region.release(l),a)},p.createRenderContext=function(t,e){var n=i.surfaceFactory.create(!0);return n?(n.width=Math.max(257,t),n.height=Math.max(257,e),n.renderContext):null},p.changeSurfaceSize=function(){var t=this.root,e=this.offsetX,n=this.offsetY,s=this.root.$getOriginalBounds();this.offsetX=s.x,this.offsetY=s.y;var r=this.renderContext,a=r.surface;if(this.sizeChanged)this.sizeChanged=!1,a.width=s.width,a.height=s.height;else{var h=i.sharedRenderContext,o=h.surface;i.sharedRenderContext=r,this.renderContext=h,this.surface=o,o.width=s.width,o.height=s.height,0!==a.width&&0!==a.height&&(h.setTransform(1,0,0,1,0,0),h.drawImage(a,e-s.x,n-s.y)),a.height=1,a.width=1}var l=t.$getInvertedConcatenatedMatrix();this.rootMatrix.setTo(l.a,l.b,l.c,l.d,l.tx-s.x,l.ty-s.y),this.renderContext.setTransform(l.a,l.b,l.c,l.d,l.tx-s.x,l.ty-s.y)},a}(t.LarkObject);i.DisplayList=r,t.registerClass(r,"lark.sys.DisplayList",["lark.sys.Renderable"])}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(i){function e(t){i.call(this),this.touchDownTarget={},this.lastTouchX=-1,this.lastTouchY=-1,this.stage=t}__extends(e,i);var n=e;return p=n.prototype,p.onTouchBegin=function(i,e,n){var s=this.findTarget(i,e);this.touchDownTarget[n]=s.$hashCode,t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_BEGIN,!0,!0,i,e,n)},p.onTouchMove=function(i,e,n){if(this.lastTouchX!==i||this.lastTouchY!==e){this.lastTouchX=i,this.lastTouchY=e;var s=this.findTarget(i,e);t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_MOVE,!0,!0,i,e,n)}},p.onTouchEnd=function(i,e,n){var s=this.findTarget(i,e),r=this.touchDownTarget[n];this.touchDownTarget[n]=-1,t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_END,!0,!0,i,e,n),s=this.findTarget(i,e),r===s.$hashCode?t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_TAP,!0,!0,i,e,n):t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,i,e,n)},p.findTarget=function(t,i){var e=this.stage.$hitTest(t,i);return e||(e=this.stage),e},e}(t.LarkObject);i.TouchHandler=e,t.registerClass(e,"lark.sys.TouchHandler")
}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this._isTyping=!1,this._isFocus=!1,this.timeoutId=-1,this.$TextField[19]=!1,this.$TextField[22]=0/0,this.$TextField[23]=0/0,this.on(t.TouchEvent.TOUCH_BEGIN,this.handleTouchBegin,this)}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"displayAsPassword",function(){return this.$TextField[20]},function(t){this.$TextField[20]!=t&&(this.$TextField[20]=t,t&&(this.wordWrap=!1),this.$invalidateContentBounds())}),n(p,"maxChars",function(){return this.$TextField[21]},function(t){var i=this.$TextField;i[21]!=t&&(i[21]=t,this.updateTextAdapter())}),n(p,"selectionActivePosition",function(){var t=this.$TextField[22];return isNaN(t)&&(t=this.text.length),t},void 0),n(p,"selectionAnchorPosition",function(){var t=this.$TextField[23];return isNaN(t)&&(t=this.text.length),t},void 0),p.selectRange=function(i,e){if(i=0|i,e=0|e,(i!=this.$TextField[23]||e!=this.$TextField[22])&&(this.$TextField[23]=i,this.$TextField[22]=e,this._isFocus)){var n=t.sys.$getTextAdapter(this);n.$selectRange(i,e)}},p.handleTouchBegin=function(){this._isFocus||(this._isFocus=!0,this.setAsCurrent())},p.setAsCurrent=function(){var i=t.sys.$getTextAdapter(this);i.$setCurrentTextInput(this)},p.$setUserInputText=function(i){i!=this.text&&(this.$setText(i),this.emitWith(t.Event.CHANGE))},p.$startInput=function(){this._isTyping=!0,this.$invalidateContentBounds(),this.emitWith(t.Event.FOCUS_IN)},p.$endInput=function(){this._isTyping=!1,this._isFocus=!1,this.$invalidateContentBounds(),this.emitWith(t.Event.FOCUS_OUT)},p.$setX=function(t){return this.updateTextAdapter(),i.prototype.$setX.call(this,t)},p.$setY=function(t){return this.updateTextAdapter(),i.prototype.$setY.call(this,t)},p.$measureContentBounds=function(t){i.prototype.$measureContentBounds.call(this,t),this.updateTextAdapter()},p.$render=function(t){this._isTyping||i.prototype.$render.call(this,t)},p.updateTextAdapter=function(){var i=this;this._isFocus&&(-1!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){if(i._isFocus){var e=t.sys.$getTextAdapter(i);e.$initializeInput()}i.timeoutId=-1},0))},p.$splitWords=function(t){for(var i=new Array(t.length),e=0;e<t.length;e++)i[e]=t.charAt(e);return i},e}(t.TextField);t.TextInput=i,t.registerClass(i,"lark.TextInput")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this.$stageWidth=0,this.$stageHeight=0,this.implMap={},this.$stage=this,this.$nestLevel=1}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"frameRate",function(){return t.sys.$ticker.$frameRate},function(i){t.sys.$ticker.$setFrameRate(i)}),n(p,"stageWidth",function(){return this.$stageWidth},void 0),n(p,"stageHeight",function(){return this.$stageHeight},void 0),p.invalidate=function(){t.sys.$invalidateRenderFlag=!0},p.registerImplementation=function(t,i){this.implMap[t]=i},p.getImplementation=function(t){return this.implMap[t]},e}(t.Sprite);t.Stage=i,t.registerClass(i,"lark.Stage")}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(e){function n(t,i,n){e.call(this),this.isPlaying=!1,this.entryClassName=n,this.stage=i,this.screenDisplayList=this.createDisplayList(i,t)}__extends(n,e);var s=n;return p=s.prototype,p.createDisplayList=function(t,e){var n=new i.DisplayList(t);return n.renderContext=e,t.$displayList=n,n},p.start=function(){!this.isPlaying&&this.stage&&(this.isPlaying=!0,this.root||this.initialize(),i.$ticker.$addPlayer(this))},p.initialize=function(){var i;if(this.entryClassName&&(i=t.getDefinitionByName(this.entryClassName)),i){var e=new i;this.root=e,e instanceof t.DisplayObject&&this.stage.addChild(e)}},p.stop=function(){this.pause(),this.stage=null},p.pause=function(){this.isPlaying&&(this.isPlaying=!1,i.$ticker.$removePlayer(this))},p.$render=function(i){var e=this.stage,n=(t.getTimer(),e.$displayList.updateDirtyRegions()),s=(t.getTimer(),0);n.length>0&&(n=n.concat(),s=e.$displayList.drawToSurface())},p.updateStageSize=function(i,e){var n=this.stage;(i!==n.$stageWidth||e!==n.$stageHeight)&&(n.$stageWidth=i,n.$stageHeight=e,this.screenDisplayList.setClipRect(i,e),n.emitWith(t.Event.RESIZE))},n}(t.LarkObject);i.Player=e,t.registerClass(e,"lark.sys.Player"),i.$logToFPS}(i=t.sys||(t.sys={}))}(lark||(lark={}));